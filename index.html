<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Do you speak american ?</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto+Slab:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.js"></script>
    <script src="https://d3js.org/topojson.v3.js"></script>
</head>
<body>
    <header>
        <div class="header-left">
            <img src="logo-white_unige.png" alt="Logo">
            <a href="index.html" class="home-link">Home</a>
        </div>
        <nav>
            <a href="methodology.html">Methodology</a>
            <a href="team.html">Team</a>
        </nav>
    </header>
    
    <img src="header_image.jpg" alt="Header Image" class="header-image">
    
    <h1>Do you speak american ?</h1>
    <p>The United States of America are often considered to be a country
        where everyone speaks English.
        However, the reality is way more surprising ! 
        Let's bring out some visualisations that will help us better understand the reality of "speaking american".
    </p>
    
    <h2>Languages by State</h2>
    <p> Let's start with an overview of all languages spoken in all of the states. You can click on any state to see exactly what is spoken there, and by how many people.
        Obviously, keep in mind that the most populated states will have more speakers of all languages, so the numbers are not directly comparable across states.
    </p>
    
    <div class="map-and-list">
        <div id="map-container"></div>

        <div id="selected-state-info">
            <h3>Languages spoken in <span id="selected-state">Select a state</span></h3>
            <div id="languages-container"></div>
        </div>
    </div>

    <h2>State-by-state breakdown</h2>
    <p>
        On this visualisation, you can observe how the share of speakers of each language by state.For most of them, it is very clear that
        English is the most spoken ! So the second graph shows the proportion without it. 
        <br>
        All languages spoken by less than 1% of the population are grouped together, for readability purposes.
    </p>
    <div id="pie-section">
        <div class="pie-controls">
            <label for="pie-state-select">Select state:</label>
            <select id="pie-state-select">
                <option value="">Nationwide</option>
            </select>
        </div>

        <div id="pie-container">
            <div class="pie-box" id="pie-with-eng">
                <!-- caption and svg inserted by JS -->
            </div>
            <div class="pie-box" id="pie-no-eng">
                <!-- caption and svg inserted by JS -->
            </div>
        </div>
    </div>

    <h2>Language dispersion vs. speakers</h2>
    <p>
        All languages are not created equal: some are widely spoken accross all states, while others are way more localised.
        On this graph, you can see the relation between the amount of speakers (Y axis) and the amount of states in which a language is spoken (X axis).
        You can highlight a specific language by typing its name in the search bar, and see its position on the graph.
        <br> Try to identify the outliers: languages widely spoken but restricted to some states, or on the contrary languages spoken in many states but by few people in each of them.
    </p>
    <div id="dot-section">
        <div class="dot-controls">
            <label for="language-search">Search language:</label>
            <input type="text" id="language-search" list="language-list" placeholder="Type language name...">
            <datalist id="language-list"></datalist>
        </div>
        <div id="dot-container"></div>
    </div>
    
    <h2>Top 15 languages</h2>
    <p>This bar chart is showing the 15 most-spoken languages nationwide (total speakers). Because English and Spanish are so far
        ahead in the results, you can hide them to change the scale and have a better idea of the distribution.<br><br>
    </p>
    <div class="bar-controls">
        <label><input type="checkbox" id="bar-english-check" checked /> Include English</label>
        <label><input type="checkbox" id="bar-spanish-check" checked /> Include Spanish</label>
    </div>
    <div id="bar-section">
        <div id="bar-container"></div>
    </div>

    <h2>Distribution of English Proficiency by State</h2>
    <p>
        People talking a lot of languages in the country also means that some of them do not speak English very well.
        Of course, this can prove to be a problem when dealing with the administration, looking for a job, or even just trying to get by in daily life.
        <br>This box plot shows the distribution of the proportion of people who don't speak English very well across all states.
        We can see that the situation varies a lot by state, with a minimum of less than 1% and a high above 15% ! 
    </p>
    <div id="boxplot-section">
        <div id="boxplot-container"></div>
    </div>

    <h2>English Proficiency by State Map</h2>
    <p>This map shows the proportion of people who speak English less than "Very Well" compared to the total state population.
        <br> It is interesting to note that the states with the highest proportion are usually the ones where the most languages are spoken.
    </p>
    <div id="english-proficiency-map-container"></div>

    <h2>Speakers of English less than "Very Well"</h2>
    <p>Here is a bar chart showing the number of people who speak English less than "Very Well" by state, ordered by volume. Includes margin of error.
        We only show the 15 states with the highest number of speakers, for readability purpose. This means that some states might have a higher proportion than ones here, but a lower number in total.
    </p>
    <div class="english-histogram-controls">
        <label><input type="checkbox" id="histogram-nationwide-check" checked /> Include Nationwide Total</label>
    </div>
    <div id="english-histogram-container"></div>

    <h2>Search a language</h2>
    <p>It's almost the end ! Here, you can just type a language name and select it to view its distribution across states.
        Start with the ones you speak, then try to find some rare ones and see where they are spoken ! 
        <br>Be careful, however, this map only shows proportions and not absolute numbers. Some languages can have strong communities in a state and yet appear with a low proportion.<br><br>
    </p>
    <div id="language-search-section">
        <input id="language-map-search" list="language-map-list" placeholder="Type a language (e.g. Spanish)" />
        <datalist id="language-map-list"></datalist>
    </div>
    <div id="language-map-container"></div>

    <footer class="site-footer">
        <div class="footer-links">
            <a href="methodology.html">Methodology</a>
            <a href="team.html">Team</a>
        </div>
        <div class="footer-links">
            <a href="https://www.kaggle.com/datasets/amartinson193/us-languages-census-data-20092013" target="_blank" rel="noopener">Languages data</a>
            <a href="https://www.kaggle.com/datasets/quarkspark/us-statewise-population-2010-2019" target="_blank" rel="noopener">Population data</a>
        </div>
    </footer>
    
    <script src="map-visualization.js"></script>
</body>
</html>
